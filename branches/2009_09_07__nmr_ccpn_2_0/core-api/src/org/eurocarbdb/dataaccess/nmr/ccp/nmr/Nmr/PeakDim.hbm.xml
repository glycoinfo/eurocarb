<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.nmr.Nmr">
  <class
    name="PeakDim"
    table="NMR_PEAKDIM"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Crosspeak dimension Note: There is no attribute 'linewidth', as the term is too ambiguous in practical use to allow a clear definition. Various aspects of line widths are covered by positionError, boxWidth, and decayRate.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.nmr.Nmr.NmrProject"
    not-null="true"
    unique="false"
    foreign-key="NMR_PEAKDIM_NMRPROJECT_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_annotation"
    access="field"
    type="java.lang.String" length="80"
    not-null="false"
  >
    <meta attribute="field-description">Descriptive text string, designed for annotation of Xpks on graphics displays. Long annotations should be avoided.</meta>
    <meta attribute="default-value">null</meta>
    <column name="ANNOTATION" sql-type="VARCHAR(80)" length="80" not-null="false"/>
  </property>
  
  <property
    name="_boxWidth"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">The full width of the peak footprint in points, i.e. the width of the area that should be considered for integration, fitting, etc. It is not a very precise definition, but this is an input parameter rather than an output parameter.</meta>
    <meta attribute="default-value">null</meta>
    <column name="BOXWIDTH" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_decayRate"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Fitted decay rate in the time domain (raw-data domain). If the raw data domain unit is seconds, the unit of decayRate is Hz. If an exponential decay is fitted to the function exp(-piRt), the decayrate is R. For a true Lorenzian decayRate is equal to the full-width-half-height.</meta>
    <meta attribute="default-value">null</meta>
    <column name="DECAYRATE" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_decayRateError"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Uncertainty (standard deviation) of peak decayRate.</meta>
    <meta attribute="default-value">null</meta>
    <column name="DECAYRATEERROR" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_dim"
    access="field"
    type="java.lang.Integer"
    not-null="true"
  >
    <meta attribute="field-description">Dimension number, from 1 to nuber of dimensions - used as key to get the corresponding DataDim</meta>
    <meta attribute="default-value">null</meta>
    <column name="DIM" sql-type="INTEGER" not-null="true" unique-key="peakDimUniqueKey" />
  </property>
  
  <property
    name="_lineWidth"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Full-width-half-height of peak/multiplet in this dimension. Unit is DataDimRef.unit (typically Hz). Do NOT use this attribute if your data are better described by one of the alternatives : positionError - standard deviation of measured position boxWidth - footprint width of peak for integration limits etc. decayRate - fitted decay rate (in Hz)</meta>
    <meta attribute="default-value">null</meta>
    <column name="LINEWIDTH" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_numAliasing"
    access="field"
    type="java.lang.Integer"
    not-null="true"
  >
    <meta attribute="field-description">number of aliasings. The real peak position is defined as positionPoints + numAliasing*dataDimRef.dataDim.numPointsOri</meta>
    <meta attribute="default-value">new java.lang.Integer(0)</meta>
    <column name="NUMALIASING" sql-type="INTEGER" not-null="true"/>
  </property>
  
  <property
    name="_phase"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Phase (in degrees) of peak</meta>
    <meta attribute="default-value">null</meta>
    <column name="PHASE" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_phaseError"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Uncertainty (standard deviation) of peak phase.</meta>
    <meta attribute="default-value">null</meta>
    <column name="PHASEERROR" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_position"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Peak position  in *point numbers*. Positions must be between 1.0 and npoints+1. The peak position in the appropriate unit (typically ppm), is given in the derived attribute 'value'.</meta>
    <meta attribute="default-value">null</meta>
    <column name="POSITION_" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_positionError"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Uncertainty (standard deviation) of peak position (in point numbers).</meta>
    <meta attribute="default-value">null</meta>
    <column name="POSITIONERROR" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_realValue"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Peak position in units of ExpDimRef.unit, corresponding to the main DataDimRef.Semi-derived value, as it were. Can be set explicitly (case 1). If not set explicitly and there are no PeakDimComponents (case 2) self.value is automatically returned. If not set and there are PeakDimComponents, None is returned. Peak.realValue always gives the best value for the quantity described in the main DataDimRef. The organisation of this parameter lets you store values for the central chemical shift of multiplets (e.g. DQF-COSY), while you still get the peak value in the simple case.</meta>
    <meta attribute="default-value">null</meta>
    <column name="REALVALUE" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <list
    name="hbApplicationData"
    table="NMR_PEAKDIM2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbDataDimRef"
    column="DATADIMREFID"
    class="ccp.api.nmr.Nmr.DataDimRef" 
    cascade="merge,save-update"
    not-null="false"
    unique="false"
    foreign-key="NMR_PEAKDIM_DATADIMREF_FK" 
  >
    <meta attribute="field-description">DataDimRef relevant to PeakDim - As there may be several alternative dataDimRefs for a given dimension, assigning this link may involve a measure of assignment.</meta>
  </many-to-one>
  
  <many-to-one
    name="hbPeak"
    column="PEAKID"
    class="ccp.api.nmr.Nmr.Peak" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMR_PEAKDIM_PEAK_FK" 
    unique-key="peakDimUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <set 
    name="hbPeakDimComponents" 
    table="NMR_PEAKDIMCOMPONENT"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbPeakDimComponent</meta>
    <cache usage="read-write"/>
    <key column="PEAKDIMID"/>
    <one-to-many class="ccp.api.nmr.Nmr.PeakDimComponent"/>
  </set>
  
  <set 
    name="hbPeakDimContribs" 
    table="NMR_ABSTRACTPEAKDIMCONTRIB"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbPeakDimContrib</meta>
    <cache usage="read-write"/>
    <key column="PEAKDIMID"/>
    <one-to-many class="ccp.api.nmr.Nmr.AbstractPeakDimContrib"/>
  </set>
  
  <set 
    name="hbDataDerivations" 
    table="NMR_PEAKDIM2DATADERI"
      schema="nmr" 
    inverse="false" 
    cascade="none"
  >
    <meta attribute="field-description">DataDerivations calculated using PeakDim</meta>
    <meta attribute="base-name">hbDataDerivation</meta>
    <cache usage="read-write"/>
    <key column="PEAKDIMID" foreign-key="NMR_ABSTDATADERI_PEAKDIMS_FK"/>
    <many-to-many column="DATADERIVATIONID" class="ccp.api.nmr.Nmr.AbstractDataDerivation" foreign-key="NMR_PEAKDIM_DATADERI_FK"/>
  </set>
  
  <set 
    name="hbMeasurements" 
    table="NMR_PEAKDIM2MEAS"
      schema="nmr" 
    inverse="false" 
    cascade="none"
  >
    <meta attribute="field-description">Measurements deriving from PeakDim.</meta>
    <meta attribute="base-name">hbMeasurement</meta>
    <cache usage="read-write"/>
    <key column="PEAKDIMID" foreign-key="NMR_ABSTMEAS_PEAKDIMS_FK"/>
    <many-to-many column="MEASUREMENTID" class="ccp.api.nmr.Nmr.AbstractMeasurement" foreign-key="NMR_PEAKDIM_MEAS_FK"/>
  </set>

  </class>

</hibernate-mapping>
