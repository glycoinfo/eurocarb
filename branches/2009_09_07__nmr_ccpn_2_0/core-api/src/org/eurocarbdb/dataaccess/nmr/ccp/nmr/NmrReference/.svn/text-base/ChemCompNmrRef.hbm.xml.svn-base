<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.nmr.NmrReference">
  <class
    name="ChemCompNmrRef"
    table="NMRR_CHEMCOMPNMRREF"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">NMR reference information for a given ChemComp as presented from a given source. </meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.nmr.NmrReference.NmrReferenceStore"
    not-null="true"
    unique="false"
    foreign-key="NMRR_CHEMCOMPNMRREF_NMRREFESTOR_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_details"
    access="field"
    type="java.lang.String" length="254"
    not-null="false"
  >
    <meta attribute="field-description">Free text, for notes, explanatory comments, etc.</meta>
    <meta attribute="default-value">null</meta>
    <column name="DETAILS" sql-type="VARCHAR(254)" length="254" not-null="false"/>
  </property>
  
  <property
    name="_sourceName"
    access="field"
    type="java.lang.String" length="80"
    not-null="true"
  >
    <meta attribute="field-description">Name of the source for the reference data. Serves as the key for the class. Serves to distinguish NMR reference data from different sources, in case different programs want to keep their own.</meta>
    <meta attribute="default-value">null</meta>
    <column name="SOURCENAME" sql-type="VARCHAR(80)" length="80" not-null="true" unique-key="chemCompNmrRefUniqueKey" />
  </property>
  
  <list
    name="hbApplicationData"
    table="NMRR_CHEMCOMPNMRREF2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbNmrReferenceStore"
    column="NMRREFERENCESTOREID"
    class="ccp.api.nmr.NmrReference.NmrReferenceStore" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMRR_CHEMCOMPNMRREF_NMRREFESTOR_FK" 
    unique-key="chemCompNmrRefUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <set 
    name="hbChemAtomNmrRefs" 
    table="NMRR_CHEMATOMNMRREF"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbChemAtomNmrRef</meta>
    <cache usage="read-write"/>
    <key column="CHEMCOMPNMRREFID"/>
    <one-to-many class="ccp.api.nmr.NmrReference.ChemAtomNmrRef"/>
  </set>
  
  <set 
    name="hbChemCompVarNmrRefs" 
    table="NMRR_CHEMCOMPVARNMRREF"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbChemCompVarNmrRef</meta>
    <cache usage="read-write"/>
    <key column="CHEMCOMPNMRREFID"/>
    <one-to-many class="ccp.api.nmr.NmrReference.ChemCompVarNmrRef"/>
  </set>

  </class>

</hibernate-mapping>
