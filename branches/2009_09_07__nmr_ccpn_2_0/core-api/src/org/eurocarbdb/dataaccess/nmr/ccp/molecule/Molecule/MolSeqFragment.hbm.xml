<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.molecule.Molecule">
  <class
    name="MolSeqFragment"
    table="MOLE_MOLSEQFRAGMENT"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Block of molResidues with consecutive serials in a molecule . For linear polymers this is guaranteed to be a connected fragment of the molecule. For other molecules the set of Molresidues selected may or may not be connected, depending on how the molecule was created. MolSeqFragments are disjoint and no residue can be a member of more than one.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.molecule.Molecule.Molecule"
    not-null="true"
    unique="false"
    foreign-key="MOLE_MOLSEQFRAG_MOLECULE_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <list
    name="hbApplicationData"
    table="MOLE_MOLSEQFRAG2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbMolecule"
    column="MOLECULEID"
    class="ccp.api.molecule.Molecule.Molecule" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="MOLE_MOLSEQFRAG_MOLECULE_FK" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <many-to-one
    name="hbNaturalSource"
    column="NATURALSOURCEID"
    class="ccp.api.general.Taxonomy.NaturalSource" 
    cascade="merge,save-update"
    not-null="false"
    unique="false"
    foreign-key="MOLE_MOLSEQFRAG_NATUSOUR_FK" 
  >
    <meta attribute="field-description">Natural Source that MolSeqFragment refers to.</meta>
  </many-to-one>
  
  <set 
    name="hbAlignments" 
    table="MOLE_ALIGNMENT"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">Alignments relevant to MolSeqFragment</meta>
    <meta attribute="base-name">hbAlignment</meta>
    <cache usage="read-write"/>
    <key column="MOLSEQFRAGMENTID"/>
    <one-to-many class="ccp.api.molecule.Molecule.Alignment"/>
  </set>
  
  <set 
    name="hbLimitResidues" 
    table="MOLE_MOLRESIDUE"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">MolResidues belonging to Polymer Sequence Block. </meta>
    <meta attribute="base-name">hbLimitResidue</meta>
    <cache usage="read-write"/>
    <key column="MOLSEQFRAGMENTID"/>
    <one-to-many class="ccp.api.molecule.Molecule.MolResidue"/>
  </set>

  </class>

</hibernate-mapping>
