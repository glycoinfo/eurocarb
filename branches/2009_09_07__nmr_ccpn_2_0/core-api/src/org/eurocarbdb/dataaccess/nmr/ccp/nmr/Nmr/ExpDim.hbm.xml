<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.nmr.Nmr">
  <class
    name="ExpDim"
    table="NMR_EXPDIM"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Dimension of Experiment</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.nmr.Nmr.NmrProject"
    not-null="true"
    unique="false"
    foreign-key="NMR_EXPDIM_NMRPROJECT_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_dim"
    access="field"
    type="java.lang.Integer"
    not-null="true"
  >
    <meta attribute="field-description">Dimension number. Dimensions go from one to numDim. It is recommended that dimensions are numbered in order of storage, so that dimension numDim has the slowest varying index, and that dim 1 should be the acquisition dimension, but programs should not rely on this.</meta>
    <meta attribute="default-value">null</meta>
    <column name="DIM" sql-type="INTEGER" not-null="true" unique-key="expDimUniqueKey" />
  </property>
  
  <property
    name="_isAcquisition"
    access="field"
    type="java.lang.Boolean"
    not-null="true"
  >
    <meta attribute="field-description">If true the relevant dimension is the acquisition dimension.</meta>
    <meta attribute="default-value">false</meta>
    <column name="ISACQUISITION" sql-type="BOOLEAN" not-null="true"/>
  </property>
  
  <list
    name="hbApplicationData"
    table="NMR_EXPDIM2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbExperiment"
    column="EXPERIMENTID"
    class="ccp.api.nmr.Nmr.Experiment" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMR_EXPDIM_EXPERIMENT_FK" 
    unique-key="expDimUniqueKey" 
  >
    <meta attribute="field-description">parent link</meta>
  </many-to-one>
  
  <many-to-one
    name="hbRefExpDim"
    column="REFEXPDIMID"
    class="ccp.api.nmr.NmrExpPrototype.RefExpDim" 
    cascade="merge,save-update"
    not-null="false"
    unique="false"
    foreign-key="NMR_EXPDIM_REFEXPDIM_FK" 
  >
    <meta attribute="field-description">Corresponding ExpDim in RefNmeExperiment</meta>
  </many-to-one>
  
  <set 
    name="hbDataDims" 
    table="NMR_ABSTRACTDATADIM"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">DataDims corresponding to ExpDim.</meta>
    <meta attribute="base-name">hbDataDim</meta>
    <cache usage="read-write"/>
    <key column="EXPDIMID"/>
    <one-to-many class="ccp.api.nmr.Nmr.AbstractDataDim"/>
  </set>
  
  <set 
    name="hbExpDimRefs" 
    table="NMR_EXPDIMREF"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">child link</meta>
    <meta attribute="base-name">hbExpDimRef</meta>
    <cache usage="read-write"/>
    <key column="EXPDIMID"/>
    <one-to-many class="ccp.api.nmr.Nmr.ExpDimRef"/>
  </set>

  </class>

</hibernate-mapping>
