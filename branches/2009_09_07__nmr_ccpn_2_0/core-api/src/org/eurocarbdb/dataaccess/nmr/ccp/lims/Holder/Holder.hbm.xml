<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.lims.Holder">
  <class
    name="Holder"
    table="HOLD_HOLDER"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">The information on the holder. It is a plastic labware that cannot be separated like plates, tubes,... that contain one or many sample(s) and that holds the bar code information for example. It can be also used to group holder together.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.lims.Holder.HolderStore"
    not-null="true"
    unique="false"
    foreign-key="HOLD_HOLDER_HOLDSTOR_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_colPosition"
    access="field"
    type="java.lang.Integer"
    not-null="false"
  >
    <meta attribute="field-description">The column position of the current holder in the parent holder.</meta>
    <meta attribute="default-value">null</meta>
    <column name="COLPOSITION" sql-type="INTEGER" not-null="false"/>
  </property>
  
  <property
    name="_details"
    access="field"
    type="java.lang.String"
    not-null="false"
  >
    <meta attribute="field-description">Detail field for comments.</meta>
    <meta attribute="default-value">null</meta>
    <column name="DETAILS" sql-type="TEXT" not-null="false"/>
  </property>
  
  <property
    name="_endDate"
    access="field"
    type="java.lang.String"
    not-null="false"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="default-value">null</meta>
    <column name="ENDDATE" sql-type="TEXT" not-null="false"/>
  </property>
  
  <property
    name="_name"
    access="field"
    type="java.lang.String" length="80"
    not-null="true"
  >
    <meta attribute="field-description">The name of the holder or the code to identify it. It is the unique identifier. </meta>
    <meta attribute="default-value">null</meta>
    <column name="NAME" sql-type="VARCHAR(80)" length="80" not-null="true" unique-key="holderUniqueKey" />
  </property>
  
  <property
    name="_rowPosition"
    access="field"
    type="java.lang.Integer"
    not-null="false"
  >
    <meta attribute="field-description">The row position of the current holder in the parent holder.</meta>
    <meta attribute="default-value">null</meta>
    <column name="ROWPOSITION" sql-type="INTEGER" not-null="false"/>
  </property>
  
  <property
    name="_startDate"
    access="field"
    type="java.lang.String"
    not-null="false"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="default-value">null</meta>
    <column name="STARTDATE" sql-type="TEXT" not-null="false"/>
  </property>
  
  <property
    name="_subPosition"
    access="field"
    type="java.lang.Integer"
    not-null="false"
  >
    <meta attribute="field-description">The sub-position of the current holder in the parent holder.</meta>
    <meta attribute="default-value">null</meta>
    <column name="SUBPOSITION" sql-type="INTEGER" not-null="false"/>
  </property>
  
  <list
    name="hbApplicationData"
    table="HOLD_HOLDER2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbHolder"
    column="HOLDERID"
    class="ccp.api.lims.Holder.Holder" 
    not-null="false"
    unique="false"
    foreign-key="HOLD_HOLDER_HOLDER_FK" 
  >
    <meta attribute="field-description">The holder to which the sub holders belong.</meta>
  </many-to-one>
  
  <many-to-one
    name="hbHolderStore"
    column="HOLDERSTOREID"
    class="ccp.api.lims.Holder.HolderStore" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="HOLD_HOLDER_HOLDSTOR_FK" 
    unique-key="holderUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <many-to-one
    name="hbHolderType"
    column="HOLDERTYPEID"
    class="ccp.api.lims.Holder.AbstractHolderType" 
    cascade="merge,save-update"
    not-null="false"
    unique="false"
    foreign-key="HOLD_HOLDER_HOLDERTYPE_FK" 
  >
    <meta attribute="field-description">The type of holder associated to a holder.</meta>
  </many-to-one>
  
  <set 
    name="hbContents" 
    table="HOLD_HOLDER"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">List of sub holder contained in an holder. This is the contents of an holder.</meta>
    <meta attribute="base-name">hbContent</meta>
    <cache usage="read-write"/>
    <key column="HOLDERID"/>
    <one-to-many class="ccp.api.lims.Holder.Holder"/>
  </set>
  
  <set 
    name="hbHolderLocations" 
    table="HOLD_HOLDERLOCATION"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbHolderLocation</meta>
    <cache usage="read-write"/>
    <key column="HOLDERID"/>
    <one-to-many class="ccp.api.lims.Holder.HolderLocation"/>
  </set>
  
  <set 
    name="hbRefSamplePositions" 
    table="HOLD_REFSAMPLEPOSITION"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbRefSamplePosition</meta>
    <cache usage="read-write"/>
    <key column="HOLDERID"/>
    <one-to-many class="ccp.api.lims.Holder.RefSamplePosition"/>
  </set>
  
  <set 
    name="hbSamples" 
    table="SAM_SAMPLE"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">List of sample contained in an holder.</meta>
    <meta attribute="base-name">hbSample</meta>
    <cache usage="read-write"/>
    <key column="HOLDERID"/>
    <one-to-many class="ccp.api.lims.Sample.Sample"/>
  </set>
  
  <set 
    name="hbHolderCategories" 
    table="HOLD_HOLDER2HOLDCATE"
      schema="nmr" 
    inverse="false" 
    cascade="none"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbHolderCategory</meta>
    <cache usage="read-write"/>
    <key column="HOLDERID" foreign-key="CLAS_HOLDCATE_HOLDERS_FK"/>
    <many-to-many column="HOLDERCATEGORYID" class="ccp.api.lims.Classification.HolderCategory" foreign-key="HOLD_HOLDER_HOLDCATE_FK"/>
  </set>

  </class>

</hibernate-mapping>
