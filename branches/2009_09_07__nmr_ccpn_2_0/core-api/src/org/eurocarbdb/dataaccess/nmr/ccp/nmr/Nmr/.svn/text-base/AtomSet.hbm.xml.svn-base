<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.nmr.Nmr">
  <class
    name="AtomSet"
    table="NMR_ATOMSET"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Group of Atoms for use in Assignment. Connects Resonance and Atom records. All Atoms connected to an AtomSet are by definition equivalent and in fast exchange throughout the project. Atoms in an atomSet could be e.g. the protons of any -CH3 or -NH3 group, or HD1/HD2 in a fast-flipping Phe, or free water protons with either bound water protons (molecular exchange) or Ser OH protons (proton exchange). Atoms that can not be in an AtomSet are e.g. a Lys epsilon CH2 (not in fast exchange) or Phe HD1/HD2 if the Phe is in slow exchange under any circumstances within the project.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.nmr.Nmr.NmrProject"
    not-null="true"
    unique="false"
    foreign-key="NMR_ATOMSET_NMRPROJECT_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_name"
    access="field"
    type="java.lang.String" length="80"
    not-null="false"
  >
    <meta attribute="field-description">name of AtomSet</meta>
    <meta attribute="default-value">null</meta>
    <column name="NAME" sql-type="VARCHAR(80)" length="80" not-null="false"/>
  </property>
  
  <property
    name="_serial"
    access="field"
    type="java.lang.Integer"
    not-null="true"
  >
    <meta attribute="field-description">Serial number of object. Serves as object main key. Serial numbers of deleted objects are not re-used. Serial numbers can only be set by the implementation. Values are in practice always positive, since negative values are interpreted as a signal to set the next free serial</meta>
    <meta attribute="default-value">null</meta>
    <column name="SERIAL" sql-type="INTEGER" not-null="true" unique-key="atomSetUniqueKey" />
  </property>
  
  <list
    name="hbApplicationData"
    table="NMR_ATOMSET2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbNmrProject"
    column="NMRPROJECTID"
    class="ccp.api.nmr.Nmr.NmrProject" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMR_ATOMSET_NMRPROJECT_FK" 
    unique-key="atomSetUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <set 
    name="hbAtoms" 
    table="MOLS_ATOM"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">Atoms making up the AtomSet. Atoms that are part of the same AtomSet are by definition equivalent and in fast exchange on the NMR time scale throughout the project.</meta>
    <meta attribute="base-name">hbAtom</meta>
    <cache usage="read-write"/>
    <key column="ATOMSETID"/>
    <one-to-many class="ccp.api.molecule.MolSystem.Atom"/>
  </set>
  
  <set 
    name="hbResonanceSets" 
    table="NMR_RESOSET2ATOMSETS"
      schema="nmr" 
    inverse="true" 
    cascade="none"
  >
    <meta attribute="field-description">ResonanceSets corresponding to AtomSet. Part of assigning Atoms to Resonances</meta>
    <meta attribute="base-name">hbResonanceSet</meta>
    <cache usage="read-write"/>
    <key column="ATOMSETID" foreign-key="NMR_RESOSET_ATOMSETS_FK"/>
    <many-to-many column="RESONANCESETID" class="ccp.api.nmr.Nmr.ResonanceSet" foreign-key="NMR_ATOMSET_RESOSETS_FK"/>
  </set>

  </class>

</hibernate-mapping>
