<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.nmr.NmrConstraint">
  <class
    name="Violation"
    table="NMRC_VIOLATION"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Violation of linked-to constraint, calculated over structures defined in ViolationList.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.nmr.NmrConstraint.NmrConstraintStore"
    not-null="true"
    unique="false"
    foreign-key="NMRC_VIOLATION_NMRCONSSTOR_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_calcValue"
    access="field"
    type="java.lang.Float"
    not-null="true"
  >
    <meta attribute="field-description">The value calculated for the quantity being constrained.</meta>
    <meta attribute="default-value">null</meta>
    <column name="CALCVALUE" sql-type="FLOAT" not-null="true"/>
  </property>
  
  <property
    name="_calcValueError"
    access="field"
    type="java.lang.Float"
    not-null="false"
  >
    <meta attribute="field-description">Error (standard deviation) in the calculated value</meta>
    <meta attribute="default-value">null</meta>
    <column name="CALCVALUEERROR" sql-type="FLOAT" not-null="false"/>
  </property>
  
  <property
    name="_fractionViolated"
    access="field"
    type="java.lang.Float"
    not-null="true"
  >
    <meta attribute="field-description">Fraction of structures in which the constraint was violated</meta>
    <meta attribute="default-value">null</meta>
    <column name="FRACTIONVIOLATED" sql-type="FLOAT" not-null="true"/>
  </property>
  
  <property
    name="_violation"
    access="field"
    type="java.lang.Float"
    not-null="true"
  >
    <meta attribute="field-description">Value of the violation - the amount by which the calcValue exceeds the limit given in the Constraint. The violation is always given as positive. The unit is given by the ConstraintList containing the violated Constraint</meta>
    <meta attribute="default-value">null</meta>
    <column name="VIOLATION" sql-type="FLOAT" not-null="true"/>
  </property>
  
  <list
    name="hbApplicationData"
    table="NMRC_VIOLATION2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbConstraint"
    column="CONSTRAINTID"
    class="ccp.api.nmr.NmrConstraint.AbstractConstraint" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMRC_VIOLATION_CONSTRAINT_FK" 
    unique-key="violationUniqueKey" 
  >
    <meta attribute="field-description">Constraint being violated</meta>
  </many-to-one>
  
  <many-to-one
    name="hbMethod"
    column="METHODID"
    class="ccp.api.general.Method.Method" 
    cascade="merge,save-update"
    not-null="false"
    unique="false"
    foreign-key="NMRC_VIOLATION_METHOD_FK" 
  >
    <meta attribute="field-description">Method used for calculating violation</meta>
  </many-to-one>
  
  <many-to-one
    name="hbViolationList"
    column="VIOLATIONLISTID"
    class="ccp.api.nmr.NmrConstraint.ViolationList" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="NMRC_VIOLATION_VIOLLIST_FK" 
    unique-key="violationUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>

  </class>

</hibernate-mapping>
