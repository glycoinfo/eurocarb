<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
  "-//Hibernate/Hibernate Mapping DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping auto-import="false" package="ccp.api.lims.RefSampleComponent">
  <class
    name="SpecificLabelGroup"
    table="REFS_SPECIFICLABELGROUP"
    schema="nmr" 
  >
  <meta attribute="extends" inherit="false">memops.general.AbstractModelObject</meta>
  <meta attribute="implements">java.lang.Comparable</meta>
  <meta attribute="class-description">Group of specific isotope labels that apply together to an individual molecule. Molecules that are mixtures of isotopomers may have several SpecificLabelGroups. Isotope labeling given in SpecificLabelGroup and IsotopeLabel must be consistent with labeling given in the Label class, as both are valid together.</meta>
  <cache usage="read-write"/>

  <id
    name="_dbId"
    access="field"
    column="DATAOBJECTID"
    type="java.lang.Long">
    <meta attribute="scope-set">protected</meta>
    <generator class="native"/>
  </id>
  
  <many-to-one
    name="_topObject"
    access="field"
    column="TOPOBJECTID"
    class="ccp.api.lims.RefSampleComponent.RefSampleComponentStore"
    not-null="true"
    unique="false"
    foreign-key="REFS_SPECLABEGROU_REFSAMPCOMPSTOR_TO_FK"
  >
    <meta attribute="field-description">hard coded link to topObject</meta>
  </many-to-one>
  
  <property
    name="_fraction"
    access="field"
    type="java.lang.Float"
    not-null="true"
  >
    <meta attribute="field-description">Fraction of the molecules that are labeled with the labeing pattern defined by the SpecificLabelGroup. If the fraction attributes of the various specificLabelGroups do not add up to 100%, the remainder of the molecules in the group are assumed to be at natural abundance.</meta>
    <meta attribute="default-value">new java.lang.Float(1.0)</meta>
    <column name="FRACTION" sql-type="FLOAT" not-null="true"/>
  </property>
  
  <property
    name="_serial"
    access="field"
    type="java.lang.Integer"
    not-null="true"
  >
    <meta attribute="field-description">Serial number of object. Serves as object main key. Serial numbers of deleted objects are not re-used. Serial numbers can only be set by the implementation. Values are in practice always positive, since negative values are interpreted as a signal to set the next free serial</meta>
    <meta attribute="default-value">null</meta>
    <column name="SERIAL" sql-type="INTEGER" not-null="true" unique-key="specificLabelGroupUniqueKey" />
  </property>
  
  <list
    name="hbApplicationData"
    table="REFS_SPECLABEGROU2APPLDATA"
      schema="nmr" 
    access="property"
    cascade="all"
  >
    <meta attribute="field-description">Application-specific data</meta>
    <key column="DATAOBJECTID"/>
    <list-index column="ORDER_applicationData_" base="1"/>
    <many-to-many
      column="APPLICATIONDATAID"
      class="memops.api.Implementation.ApplicationData"
      foreign-key="IMPL_DATAOBJECT_APPLDATA_FK"
      unique="true">
    </many-to-many>
  </list>
  
  <many-to-one
    name="hbAccess"
    column="ACCESSID"
    class="memops.api.AccessControl.AccessObject" 
    not-null="false"
    unique="true"
    foreign-key="IMPL_DATAOBJECT_ACCESS_FK" 
  >
    <meta attribute="field-description">Access object that controls object access</meta>
  </many-to-one>
  
  <many-to-one
    name="hbMolComponent"
    column="MOLCOMPONENTID"
    class="ccp.api.lims.RefSampleComponent.MolComponent" 
    cascade="merge,save-update"
    not-null="true"
    unique="false"
    foreign-key="REFS_SPECLABEGROU_MOLCOMP_FK" 
    unique-key="specificLabelGroupUniqueKey" 
  >
    <meta attribute="field-description">N/A</meta>
  </many-to-one>
  
  <set 
    name="hbIsotopeLabels" 
    table="REFS_ISOTOPELABEL"
      schema="nmr" 
    inverse="true" 
    cascade="all"
  >
    <meta attribute="field-description">N/A</meta>
    <meta attribute="base-name">hbIsotopeLabel</meta>
    <cache usage="read-write"/>
    <key column="SPECIFICLABELGROUPID"/>
    <one-to-many class="ccp.api.lims.RefSampleComponent.IsotopeLabel"/>
  </set>

  </class>

</hibernate-mapping>
